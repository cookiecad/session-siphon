title Session Siphon Dev
layout tall
cd .

# Window 1 (Main/Left): UI
launch --title "UI" --cwd=ui zsh -c "npm run dev; zsh"

# Window 2 (Right Top): Collector
launch --title "Collector" --cwd=. zsh -c "source .venv/bin/activate && siphon-collector; zsh"

# Window 3 (Right Middle): Processor & Typesense
launch --title "Processor" --cwd=. zsh -c "./scripts/setup-typesense.sh && echo 'Starting processor in 5s...' && sleep 5 && source .venv/bin/activate && siphon-processor; zsh"

# Window 4 (Right Bottom): Sync Loop (less frequent, quieter)
launch --title "Sync" --cwd=. zsh -c "while true; do ./scripts/sync-to-server.sh 2>/dev/null | tail -1; sleep 30; done; zsh"
